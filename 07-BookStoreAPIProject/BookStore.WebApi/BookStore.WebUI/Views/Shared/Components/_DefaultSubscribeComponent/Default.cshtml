@*
    _DefaultSubscribeComponent
*@

<section id="subscribe">
	<div class="container">
		<div class="row justify-content-center">

			<div class="col-md-8">
				<div class="row">

					<div class="col-md-6">

						<div class="title-element">
							<h2 class="section-title divider">Subscribe to our newsletter</h2>
						</div>

					</div>
					<div class="col-md-6">

						<div class="subscribe-content" data-aos="fade-up">
							<p>
								Sed eu feugiat amet, libero ipsum enim pharetra hac dolor sit amet, consectetur. Elit
								adipiscing enim pharetra hac.
							</p>
							<form id="formSub">
								<input type="text" name="Email" id="email" placeholder="Enter your email addresss here">
								<button class="btn-subscribe">
									<span>send</span>
									<i class="icon icon-send"></i>
								</button>
							</form>
						</div>

					</div>

				</div>
			</div>

		</div>
	</div>
</section>

<script>
    $(document).ready(function() {
        $("#formSub").submit(function(event) {
            event.preventDefault(); // Prevent default form submission

            var emailValue = $("#email").val(); // Get the email input value

            $.ajax({
                url: "https://localhost:7190/api/Subscribers",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({ Email: emailValue }), // Convert data to JSON format
                success: function(response) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Subscription Successful!',
                        text: 'Thank you for subscribing.',
                    });
                },
                error: function(xhr, status, error) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Subscription Failed!',
                        text: 'Error: ' + xhr.responseText,
                    });
                }
            });
        });
    });
</script>